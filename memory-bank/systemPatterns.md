# 系统模式

## 架构设计
本应用采用Flutter框架进行跨平台开发，遵循清晰简洁的架构原则：

```
/lib
  main.dart         // 程序入口，主界面构建和事件处理
  /widgets          // 可复用的UI组件（输入框、结果展示等）
  /utils            // 工具类，包含房贷计算公式和最优年限算法
```

## 关键技术决策
1. **使用Flutter框架**：
   - 实现一次开发，多平台部署（iOS/Android）
   - 提供丰富的UI组件库，便于创建美观的界面
   - 支持热重载，提高开发效率

2. **前端实现所有计算逻辑**：
   - 避免后端依赖，简化系统架构
   - 所有计算在本地完成，保护用户隐私
   - 提高应用响应速度，无需网络请求

3. **代码组织方式**：
   - 将核心计算逻辑放在/utils目录
   - 使用/widgets目录存放可复用的UI组件
   - main.dart专注于界面布局和事件绑定

## 组件关系
1. **主界面组件**：
   - 包含所有输入字段（贷款金额、利率、年限、月可支配收入）
   - 计算按钮触发器
   - 结果展示区域
   - 风险评估可视化组件

2. **计算引擎**：
   - 负责执行基础房贷计算
   - 实现最优贷款年限算法
   - 进行风险等级评估

3. **风险评估组件**：
   - 根据月供与收入比例计算安全等级
   - 使用颜色编码的进度条展示风险程度
   - 提供文字说明的风险描述

## 关键实现路径
1. **用户输入处理**：
   - 监听输入字段的变化
   - 验证输入数据的有效性
   - 当必要字段都正确填写后启用计算按钮

2. **计算过程**：
   - 触发计算事件
   - 调用相应的计算函数
   - 更新界面展示计算结果
   - 更新风险评估状态

3. **风险评估更新**：
   - 根据最新计算结果更新安全等级
   - 调整进度条颜色和填充度
   - 更新风险描述文字
